<h1>VibeCode and Clean</h1>

<button onclick="myRun()">View iFrame Source</button>, width:<input type=range value=50 id="myRange" onChange="myRun()"> %<br>
<table border=1 style="width:97%;">
  <tr>
    <th id="myWid1" width="48%">Vibe Page</th>
    <th id="myWid2" width="48%">Vibe Source</th>
  </tr>
  <tr>
    <td><iframe id="myIframe" src="t1a02-vibe.html" width="100%" height="700px"></iframe></td>
    <td style="padding:0; margin:0; position:relative; vertical-align:top;">
      <textarea id="sourceTextarea" style="width:100%; height:100%; box-sizing:border-box; resize:both; border:none; margin:0; padding:0;" rows="50"></textarea>
    </td>
  </tr>
  <tr>
    <th > Cleaned Page </th>
    <th >Cleaned Source</th>
  </tr>
  <tr>
  <tr>
    <td><iframe id="myIframe2" src="t1a02-cleaned.html" width="100%" height="700px"></iframe></td>
    <td style="padding:0; margin:0; position:relative; vertical-align:top;">
      <textarea id="sourceTextarea2" style="width:100%; height:100%; box-sizing:border-box; resize:both; border:none; margin:0; padding:0;" rows="50"></textarea>
    </td>
  </tr>
</table>

<script>

  function myRun(){
    console.log(document.getElementById('myRange').value)
    document.getElementById('myWid1').style.width = document.getElementById('myRange').value + '%'
    viewSource('myIframe','sourceTextarea'); 
    viewSource('myIframe2','sourceTextarea2');
  }
  function viewSource(myFrameHTML ,myFrameSource) {
    const iframe = document.getElementById(myFrameHTML);
    const textarea = document.getElementById(myFrameSource);

    try {
      const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
      const source = iframeDoc.documentElement.outerHTML;
      textarea.value = source;
    } catch (e) {
      console.error("Access to iframe content blocked by Same-Origin Policy:", e);
      textarea.value = "Error: Cannot access content from this iframe due to the Same-Origin Policy. " +
                       "The content must be from the same domain as the parent page.";
    }
  }
</script>
